<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en-us lang=en-us><head><link rel=stylesheet href=https://unpkg.com/spectre.css/dist/spectre.min.css><link rel=stylesheet href=https://unpkg.com/spectre.css/dist/spectre-exp.min.css><link rel=stylesheet href=https://unpkg.com/spectre.css/dist/spectre-icons.min.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/styles/nnfx-dark.min.css><link rel=stylesheet href=https://pro.fontawesome.com/releases/v5.10.0/css/all.css integrity=sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p crossorigin=anonymous><link href=https://gmpg.org/xfn/11 rel=profile><meta charset=utf-8><meta name=generator content="Hugo 0.83.1"><meta name=viewport content="width=device-width,initial-scale=1"><title>我如何架設這個部落格的？ &#183; Ming's Site</title><meta name=description content="用 Hugo + Github Pages + Github Actions 快速架設部落格網站。"><link type=text/css rel=stylesheet href=https://minghsu0107.github.io/css/print.css media=print><link type=text/css rel=stylesheet href=https://minghsu0107.github.io/css/poole.css><link type=text/css rel=stylesheet href=https://minghsu0107.github.io/css/syntax.css><link type=text/css rel=stylesheet href=https://minghsu0107.github.io/css/hyde.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700"><link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/favicon.png></head><style>pre,code{white-space:pre;overflow-x:scroll}.hljs{display:inline-block;overflow-x:scroll;padding-right:100%;background:0 0;color:#fff;-webkit-text-size-adjust:none;min-width:2300px}</style><style>@import "https://fonts.googleapis.com/css?family=Open+Sans";body{font-family:open sans,sans-serif}.searchTerm{border-radius:5px;width:100%;border:1px solid #00b4cc;padding:8px 12px}</style><script async src="https://www.googletagmanager.com/gtag/js?id=G-96ZZVQWZLF"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-96ZZVQWZLF')</script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/languages/yaml.min.js></script><script>hljs.initHighlightingOnLoad()</script><body><aside class=sidebar><div class=container><div class=sidebar-about><a href=https://minghsu0107.github.io/><h1>Ming's Site</h1></a><p class=lead><a href=https://github.com/minghsu0107><i class="fab fa-github"></i></a>&nbsp;&nbsp;<a href=https://linkedin.com/in/hao-ming-hsu-178176181> <i class="fab fa-linkedin"></i></a><br><a href=/about>Hao-Ming Hsu (許浩鳴)</a><br>Learn by Doing.<br><a href=https://github.com/minghsu0107>@minghsu0107</a></p></div><nav><ul class=sidebar-nav><li><a href=/about>About</a></li><li><a href=/categories>Categories</a></li><li><a href=/tags>Tags</a></li></ul></nav><div style="margin:0 auto"><form action=https://minghsu0107.github.io/search><input placeholder=search class=searchTerm id=search-query name=s></form></div><br><p>&copy; 2021. All rights reserved.</p></div></aside><main class="content container"><div class=post><h1>我如何架設這個部落格的？</h1><time datetime=2021-02-24T16:27:23+0800 class=post-date>Wed, Feb 24, 2021 &#183; <span class=read-time>2 min read</span></time><div class=chip><a href=https://minghsu0107.github.io/tags/hugo//>Hugo</a></div><div class=chip><a href=https://minghsu0107.github.io/tags/golang//>Golang</a></div><br><br><p>用 Hugo + Github Pages + Github Actions 快速架設部落格網站。</p><p><img src=/static/images/vUVbWN9.png alt></p><p>Hugo 是一個用 Go 撰寫的開源網站架設引擎。它幫助我們得以快速得架設一個靜態網站。</p><h2 id=安裝-hugo>安裝 Hugo</h2><ul><li><a href=https://gohugo.io/getting-started/installing/>https://gohugo.io/getting-started/installing/</a></li><li><a href=https://github.com/gohugoio/hugo/releases/>https://github.com/gohugoio/hugo/releases/</a></li></ul><p>啟動新 Hugo 專案:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>hugo new site myblog -f yaml
</code></pre></div><h2 id=基本設定>基本設定</h2><p>初始化 Repo:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git init
</code></pre></div><p>下載 Hugo 的 theme (使用 git submodule)：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git submodule add https://github.com/spf13/hyde themes/hyde
</code></pre></div><p>修改 <code>config.yaml</code>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>baseURL</span>: <span style=color:#ae81ff>https://minghsu0107.github.io/</span>
<span style=color:#f92672>languageCode</span>: <span style=color:#ae81ff>en-us</span>
<span style=color:#f92672>title</span>: <span style=color:#ae81ff>Ming&#39;s Site</span>

<span style=color:#75715e># 記得設定你的 theme</span>
<span style=color:#f92672>theme </span>: <span style=color:#e6db74>&#39;hyde&#39;</span>
</code></pre></div><p>新增新的 post:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>hugo new posts/first-post.md
</code></pre></div><p>修改 <code>/content/posts/first-post.md</code>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml>---
<span style=color:#f92672>title</span>: <span style=color:#e6db74>&#34;First Post&#34;</span>
<span style=color:#f92672>date</span>: <span style=color:#e6db74>2021-02-24T16:27:23</span><span style=color:#ae81ff>+08</span>:<span style=color:#ae81ff>00</span>
<span style=color:#f92672>draft</span>: <span style=color:#66d9ef>false</span>
---
<span style=color:#ae81ff>My first post!!!</span>
</code></pre></div><p>啟動 testing server:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>hugo server -w
</code></pre></div><p>成功的話會看到你的第一篇 post：</p><p><img src=/static/images/first-post.png alt=first-post></p><h2 id=部署到-github-pages>部署到 Github Pages</h2><p>在 <code>.github/workflows/gh-pages.yaml</code> 新增打包與部署 hugo 的 Github Actions:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>name</span>: <span style=color:#ae81ff>github pages</span>

<span style=color:#f92672>on</span>:
  <span style=color:#f92672>push</span>:
    <span style=color:#f92672>branches</span>:
      - <span style=color:#ae81ff>main </span> <span style=color:#75715e># Set a branch name to trigger deployment</span>
  <span style=color:#f92672>pull_request</span>:

<span style=color:#f92672>jobs</span>:
  <span style=color:#f92672>deploy</span>:
    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-18.04</span>
    <span style=color:#f92672>steps</span>:
      - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v2</span>
        <span style=color:#f92672>with</span>:
          <span style=color:#f92672>submodules</span>: <span style=color:#66d9ef>true</span>  <span style=color:#75715e># Fetch Hugo themes (true OR recursive)</span>
          <span style=color:#f92672>fetch-depth</span>: <span style=color:#ae81ff>0</span>    <span style=color:#75715e># Fetch all history for .GitInfo and .Lastmod</span>

      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Setup Hugo</span>
        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-hugo@v2</span>
        <span style=color:#f92672>with</span>:
          <span style=color:#f92672>hugo-version</span>: <span style=color:#e6db74>&#39;0.83.1&#39;</span>

      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build</span>
        <span style=color:#f92672>run</span>: <span style=color:#ae81ff>hugo --minify</span>

      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Deploy</span>
        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-gh-pages@v3</span>
        <span style=color:#f92672>if</span>: <span style=color:#ae81ff>github.ref == &#39;refs/heads/main&#39;</span>
        <span style=color:#f92672>with</span>:
          <span style=color:#f92672>github_token</span>: <span style=color:#ae81ff>${{ secrets.GITHUB_TOKEN }}</span>
          <span style=color:#f92672>publish_dir</span>: <span style=color:#ae81ff>./public</span>
          <span style=color:#f92672>cname</span>: <span style=color:#ae81ff>minghsu.io</span>
</code></pre></div><p>接著新增一個新的分支 <code>gh-pages</code>，Github Actions 之後會將部落格打包並部署這個分支：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git checkout -b gh-pages
git push origin gh-pages
</code></pre></div><p>把 code 推到 Github 上之後，Github Actions 會開始部署部落格。不過這次的部署會失敗，因為我們還沒設定 Github Pages 的 branch。因此接著我們要到 <code>Settings -> Pages</code> 將 Github Pages 的分支設定為 <code>gh-pages</code>。現在 Github Pages 會重新開始部署，成功之後瀏覽 <code>https://minghsu.io</code> 就能看到部落格！</p><h2 id=reference>Reference</h2><ul><li><a href=https://themes.gohugo.io/hyde/>https://themes.gohugo.io/hyde/</a></li><li><a href=https://gohugo.io/templates/lookup-order/>https://gohugo.io/templates/lookup-order/</a></li></ul></div><h2>Recommended Articles</h2><ul><li><a href=https://minghsu0107.github.io/posts/event-driven-golang-taipei-55/>輕鬆「Go」建事件驅動應用</a></li><li><a href=https://minghsu0107.github.io/posts/http-context/>Passing Parameters in Golang HTTP Context</a></li><li><a href=https://minghsu0107.github.io/posts/aws-cloudfront-with-signed-url/>[AWS] AWS CloudFront with Signed URL</a></li></ul><h2>Comments</h2><script src=https://utteranc.es/client.js repo=minghsu0107/blog issue-term=pathname theme=github-light crossorigin=anonymous async></script></main></body></html>